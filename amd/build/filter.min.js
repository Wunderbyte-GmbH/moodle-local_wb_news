define("local_moodle-local_wb_news/filter",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/*
   * @package    local_wb_news
   * @copyright  Wunderbyte GmbH
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const SELECTORS_ALLINSTANCES='[data-id="wb-categoryfilter-instance"]',SELECTORS_ITEMCONTAINER='[data-id="wb-categoryfilter-items"]';function normalizeList(val){return(val||"").split(/[,;|]/).map((s=>s.trim())).filter(Boolean)}function setupInstance(container){const listRoot=container.querySelector(SELECTORS_ITEMCONTAINER)||container,items=Array.from(listRoot.querySelectorAll("[data-category]")),dropdown=function(categories,onSelect){const wrapper=document.createElement("div");wrapper.className="dropdown mb-3",wrapper.innerHTML='\n<button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-id="wb-categoryfilter-button">Kategorie: Alle</button>\n<ul class="dropdown-menu" data-id="wb-categoryfilter-menu"></ul>';const ul=wrapper.querySelector('[data-id="wb-categoryfilter-menu"]'),addItem=(label,value)=>{const li=document.createElement("li"),a=document.createElement("a");a.className="dropdown-item",a.href="#",a.setAttribute("data-value",value),a.textContent=label,li.appendChild(a),ul.appendChild(li)};return addItem("Alle","__all__"),categories.forEach((c=>addItem(c,c))),wrapper.addEventListener("click",(e=>{const a=e.target.closest("a.dropdown-item");if(!a)return;e.preventDefault();const value=a.getAttribute("data-value");wrapper.querySelector('[data-id="wb-categoryfilter-button"]').textContent="Kategorie: "+("__all__"===value?"Alle":a.textContent),onSelect(value)})),wrapper}(Array.from(new Set(items.flatMap((el=>normalizeList(el.getAttribute("data-category")))))).sort(((a,b)=>a.localeCompare(b))),(value=>{items.forEach((el=>{if("__all__"===value)return void el.classList.remove("d-none");const match=normalizeList(el.getAttribute("data-category")).includes(value);el.classList.toggle("d-none",!match)}))}));container.insertBefore(dropdown,listRoot)}_exports.init=()=>{document.querySelectorAll(SELECTORS_ALLINSTANCES).forEach((container=>{container.dataset.initialized||(container.dataset.initialized="true",setupInstance(container),container.addEventListener("click",(e=>{const t=e.target;t&&t.dataset&&t.dataset.action})))}))}}));

//# sourceMappingURL=filter.min.js.map