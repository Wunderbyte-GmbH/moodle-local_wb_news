define("local_wb_news/editnews",["exports","core_form/modalform","core/str"],(function(_exports,_modalform,_str){var obj;
/*
   * @package    local_wb_news
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.addeditformModal=addeditformModal,_exports.copyModal=copyModal,_exports.deleteModal=deleteModal,_exports.init=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};const SELECTORS_ALLINSTANCES='[data-id="wb-news-all-instances-container"]';function addeditformModal(button){console.log("button",button);const id=button.dataset.id?button.dataset.id:0,instanceid=button.dataset.instanceid;let formclass="local_wb_news\\form\\addeditmodal";"true"==button.dataset.isinstance&&(formclass="local_wb_news\\form\\addeditinstancemodal");var title=(0,_str.get_string)("addform","local_wb_news");id>0&&(title=(0,_str.get_string)("editform","local_wb_news"));const modalForm=new _modalform.default({formClass:formclass,args:{id:id,instanceid:instanceid},modalConfig:{title:title},returnFocus:button});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{let anchor=`#instance-${instanceid}`;location.href=`${location.origin}${location.pathname}${anchor}`,location.reload()})),modalForm.show()}function deleteModal(button){console.log("button",button);const id=button.dataset.id,instanceid=button.dataset.instanceid;let formclass="local_wb_news\\form\\deletemodal";"true"==button.dataset.isinstance&&(formclass="local_wb_news\\form\\deleteinstancemodal");const modalForm=new _modalform.default({formClass:formclass,args:{id:id,instanceid:instanceid},modalConfig:{title:(0,_str.get_string)("deletenewsitem","local_wb_news")},returnFocus:button});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{location.reload()})),modalForm.show()}function copyModal(button){console.log("button",button);const id=button.dataset.id,instanceid=button.dataset.instanceid;let formclass="local_wb_news\\form\\addeditmodal";"true"==button.dataset.isinstance&&(formclass="local_wb_news\\form\\addeditinstancemodal");const modalForm=new _modalform.default({formClass:formclass,args:{id:id,instanceid:instanceid,copy:1},modalConfig:{title:(0,_str.get_string)("copyitem","local_wb_news")},returnFocus:button});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{location.reload()})),modalForm.show()}_exports.init=()=>{console.log("run init");const containers=document.querySelectorAll(SELECTORS_ALLINSTANCES);console.log("containers",containers),containers.forEach((container=>{container.dataset.initialized||(container.dataset.initialized="true",container.addEventListener("click",(e=>{!function(event){if(console.log(event.target),event.target&&event.target.dataset.action){const action=event.target.dataset.action;switch(action){case"add":case"edit":addeditformModal(event.target);break;case"delete":deleteModal(event.target);break;case"copy":copyModal(event.target);break;default:console.log("Unknown action:",action)}}}(e)})))}))}}));

//# sourceMappingURL=editnews.min.js.map